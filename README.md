# æ¯æ—¥é£Ÿç‰©è®°å½• - Daily Food Tracker

ä¸€ä¸ªç°ä»£åŒ–çš„é£Ÿç‰©æ‘„å…¥è¿½è¸ªWebåº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·è®°å½•å’Œç®¡ç†æ¯æ—¥é¥®é£Ÿä¹ æƒ¯ã€‚

[![éƒ¨ç½²çŠ¶æ€](https://img.shields.io/badge/éƒ¨ç½²-Cloudflare%20Workers-orange)](https://food-tracker-app.includeleec-b6f.workers.dev)
[![æŠ€æœ¯æ ˆ](https://img.shields.io/badge/æŠ€æœ¯æ ˆ-Next.js%2015-blue)](https://nextjs.org)
[![æ•°æ®åº“](https://img.shields.io/badge/æ•°æ®åº“-Supabase-green)](https://supabase.com)

### Vibe Coding
æœ¬é¡¹ç›®ä½¿ç”¨ Kiro å’Œ Claude Code æ„å»ºã€‚
Claude Code æˆ‘ç›®å‰ä½¿ç”¨çš„æ˜¯ Claude Code é•œåƒæ± : [https://gaccode.com/signup?ref=0FIU5756](https://gaccode.com/signup?ref=0FIU5756)

## ğŸŒŸ äº§å“ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **ğŸ“± ç§»åŠ¨ä¼˜å…ˆè®¾è®¡** - ä¸“ä¸ºç§»åŠ¨è®¾å¤‡ä¼˜åŒ–çš„å“åº”å¼ç•Œé¢
- **ğŸ½ï¸ å¤šé¤æ¬¡è®°å½•** - æ”¯æŒæ—©é¤ã€ä¸­é¤ã€æ™šé¤ã€åŠ é¤çš„è¯¦ç»†è®°å½•
- **ğŸ“Š è¥å…»è¿½è¸ª** - é£Ÿç‰©é‡é‡ã€å¡è·¯é‡Œè‡ªåŠ¨è®¡ç®—å’Œç»Ÿè®¡
- **ğŸ“¸ å›¾ç‰‡ä¸Šä¼ ** - æ”¯æŒé£Ÿç‰©ç…§ç‰‡ä¸Šä¼ ï¼ŒåŸºäºCloudflare Images
- **ğŸ“… å†å²æŸ¥çœ‹** - å®Œæ•´çš„å†å²è®°å½•æŸ¥çœ‹å’Œç¼–è¾‘åŠŸèƒ½
- **ğŸ” å®‰å…¨è®¤è¯** - åŸºäºSupabaseçš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

### ç§»åŠ¨ç«¯ä¼˜åŒ–
- **ğŸ‘¤ ç”¨æˆ·å¤´åƒèœå•** - æ›¿ä»£ä¼ ç»Ÿæ±‰å ¡èœå•ï¼Œæä¾›ç›´è§‚çš„ç”¨æˆ·æ“ä½œ
- **ğŸ¯ è§¦æ‘¸å‹å¥½** - å¤§æŒ‰é’®è®¾è®¡ï¼Œæ”¯æŒæ‰‹åŠ¿æ“ä½œ
- **ğŸ“± è‡ªé€‚åº”å¸ƒå±€** - å®Œç¾é€‚é…å„ç§å±å¹•å°ºå¯¸ (320px - 768px)
- **ğŸ”„ è‡ªåŠ¨æ»šåŠ¨** - ç¼–è¾‘æ—¶è‡ªåŠ¨æ»šåŠ¨åˆ°è¡¨å•åŒºåŸŸ
- **ğŸ’« æµ®åŠ¨æŒ‰é’®** - é£Ÿç‰©è®°å½•å¡ç‰‡ä¸Šçš„æµ®åŠ¨ç¼–è¾‘/åˆ é™¤æŒ‰é’®

## ğŸš€ åœ¨çº¿è®¿é—®

- **ä¸»åŸŸå**: [https://food-tracker-app.includeleec-b6f.workers.dev](https://food-tracker-app.includeleec-b6f.workers.dev)
- **è‡ªå®šä¹‰åŸŸå**: [https://food.tinycard.xyz](https://food.tinycard.xyz)

### æµ‹è¯•è´¦æˆ·
- **é‚®ç®±**: includeleec@gmail.com
- **å¯†ç **: 123456

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **Next.js 15.3.5** - Reactå…¨æ ˆæ¡†æ¶ï¼Œä½¿ç”¨App Router
- **React 19** - æœ€æ–°ç‰ˆæœ¬UIåº“
- **TypeScript 5** - ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- **Tailwind CSS 4** - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶

### åç«¯æœåŠ¡
- **Supabase** - PostgreSQLæ•°æ®åº“ + å®æ—¶åŠŸèƒ½
- **Supabase Auth** - ç”¨æˆ·è®¤è¯å’Œä¼šè¯ç®¡ç†
- **Row Level Security (RLS)** - æ•°æ®åº“çº§åˆ«çš„æ•°æ®éš”ç¦»

### éƒ¨ç½²æ¶æ„
- **Cloudflare Workers** - æ— æœåŠ¡å™¨éƒ¨ç½²å¹³å°
- **OpenNext Cloudflare** - Next.jsé€‚é…å™¨
- **Cloudflare Images** - å›¾ç‰‡å­˜å‚¨å’ŒCDNåŠ é€Ÿ

### å¼€å‘å·¥å…·
- **Turbopack** - å¿«é€Ÿå¼€å‘æ„å»ºå·¥å…·
- **Jest** - å•å…ƒæµ‹è¯•æ¡†æ¶
- **Playwright** - E2Eæµ‹è¯•æ¡†æ¶
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥

## ğŸ“ é¡¹ç›®ç»“æ„

```
food-tracker-app/
â”œâ”€â”€ app/                    # Next.js App Router é¡µé¢
â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ upload/        # å›¾ç‰‡ä¸Šä¼ API
â”‚   â”‚   â””â”€â”€ food-records/  # é£Ÿç‰©è®°å½•API
â”‚   â”œâ”€â”€ auth/              # è®¤è¯é¡µé¢
â”‚   â””â”€â”€ dashboard/         # ä¸»åº”ç”¨é¡µé¢
â”œâ”€â”€ components/            # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/               # åŸºç¡€UIç»„ä»¶
â”‚   â””â”€â”€ food/             # é£Ÿç‰©ç›¸å…³ç»„ä»¶
â”œâ”€â”€ lib/                   # å·¥å…·å‡½æ•°å’ŒæœåŠ¡
â”‚   â”œâ”€â”€ supabase-*        # Supabaseå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ validation.ts     # æ•°æ®éªŒè¯
â”‚   â””â”€â”€ security-utils.ts # å®‰å…¨å·¥å…·
â”œâ”€â”€ types/                 # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ database/              # æ•°æ®åº“æ¶æ„å’Œè¿ç§»
â”œâ”€â”€ e2e/                   # E2Eæµ‹è¯•
â””â”€â”€ scripts/               # å·¥å…·è„šæœ¬
```

## ğŸ”§ æœ¬åœ°å¼€å‘

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- npm/yarn/pnpm
- Git

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/includeleec/foodtracker.git
cd foodtracker
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **ç¯å¢ƒé…ç½®**
```bash
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å˜é‡ï¼š
```env
# Supabase é…ç½®
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# Cloudflare Images é…ç½®
CLOUDFLARE_ACCOUNT_ID=your_account_id
CLOUDFLARE_ACCOUNT_HASH=your_account_hash
NEXT_PUBLIC_CLOUDFLARE_ACCOUNT_HASH=your_account_hash
CLOUDFLARE_IMAGES_TOKEN=your_images_token

# åº”ç”¨é…ç½®
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

4. **æ•°æ®åº“è®¾ç½®**
```bash
# åœ¨ Supabase SQL ç¼–è¾‘å™¨ä¸­æ‰§è¡Œ
# database/schema.sql      - åˆ›å»ºè¡¨ç»“æ„
# database/rls-policies.sql - è®¾ç½®å®‰å…¨ç­–ç•¥
```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

## ğŸ“‹ å¯ç”¨å‘½ä»¤

### å¼€å‘å‘½ä»¤
```bash
npm run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (Turbopack)
npm run build        # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run start        # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run lint         # ä»£ç è´¨é‡æ£€æŸ¥
```

### æµ‹è¯•å‘½ä»¤
```bash
# å•å…ƒæµ‹è¯•
npm test             # è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
npm run test:watch   # ç›‘è§†æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:coverage # ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š

# E2Eæµ‹è¯•
npm run test:e2e     # è¿è¡Œæ‰€æœ‰E2Eæµ‹è¯• (Chromeæ¡Œé¢ + ç§»åŠ¨ç‰ˆ)
npm run test:e2e:ui  # UIæ¨¡å¼è¿è¡ŒE2Eæµ‹è¯•
npm run test:e2e:debug # è°ƒè¯•æ¨¡å¼è¿è¡ŒE2Eæµ‹è¯•

# ç‰¹å®šæµ‹è¯•
npm test components/food/__tests__/food-record-card.test.tsx  # è¿è¡Œç‰¹å®šå•å…ƒæµ‹è¯•
npm run test:e2e -- --project=chromium --grep="User can login"  # è¿è¡Œç‰¹å®šE2Eæµ‹è¯•
```

### éƒ¨ç½²å‘½ä»¤
```bash
npm run deploy       # æ„å»ºå¹¶éƒ¨ç½²åˆ°Cloudflare
npm run preview      # æœ¬åœ°é¢„è§ˆæ„å»ºç»“æœ
npm run cf-typegen   # ç”ŸæˆCloudflareç¯å¢ƒç±»å‹
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### æ•°æ®å®‰å…¨
- **Row Level Security (RLS)** - ç”¨æˆ·æ•°æ®å®Œå…¨éš”ç¦»
- **JWT Token éªŒè¯** - å®‰å…¨çš„ç”¨æˆ·è®¤è¯
- **é€Ÿç‡é™åˆ¶** - APIè¯·æ±‚é¢‘ç‡é™åˆ¶
- **è¾“å…¥éªŒè¯** - å¤šå±‚æ•°æ®éªŒè¯
- **XSS/CSRF é˜²æŠ¤** - å®Œæ•´çš„å®‰å…¨å¤´é…ç½®

### å›¾ç‰‡å®‰å…¨
- **æ–‡ä»¶ç±»å‹éªŒè¯** - ä»…å…è®¸å®‰å…¨çš„å›¾ç‰‡æ ¼å¼
- **æ–‡ä»¶å¤§å°é™åˆ¶** - æœ€å¤§10MBé™åˆ¶
- **é­”æ•°éªŒè¯** - éªŒè¯çœŸå®æ–‡ä»¶ç±»å‹
- **CDNåŠ é€Ÿ** - Cloudflare Imagesæä¾›å…¨çƒåŠ é€Ÿ

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
- **ä»£ç åˆ†å‰²** - Next.jsè‡ªåŠ¨ä»£ç åˆ†å‰²
- **å›¾ç‰‡ä¼˜åŒ–** - æ”¯æŒWebP/AVIFæ ¼å¼
- **æ‡’åŠ è½½** - å›¾ç‰‡å’Œç»„ä»¶æŒ‰éœ€åŠ è½½
- **ç¼“å­˜ç­–ç•¥** - æ™ºèƒ½ç¼“å­˜æœºåˆ¶

### åç«¯ä¼˜åŒ–
- **APIç¼“å­˜** - 5åˆ†é’ŸTTLçš„æ•°æ®ç¼“å­˜
- **æ•°æ®åº“ç´¢å¼•** - ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- **è¾¹ç¼˜è®¡ç®—** - Cloudflare Workerså…¨çƒåˆ†å¸ƒ

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### æµ‹è¯•è¦†ç›–åŠŸèƒ½

#### å•å…ƒæµ‹è¯•è¦†ç›–
- âœ… **APIè·¯ç”±** - Upload APIã€Food Records API
- âœ… **Reactç»„ä»¶** - é£Ÿç‰©è®°å½•å¡ç‰‡ã€è¡¨å•ã€è®¤è¯ç»„ä»¶
- âœ… **å®‰å…¨å·¥å…·** - XSSé˜²æŠ¤ã€SQLæ³¨å…¥æ£€æµ‹ã€JWTéªŒè¯
- âœ… **æ•°æ®åº“æœåŠ¡** - é£Ÿç‰©è®°å½•æœåŠ¡ã€é”™è¯¯å¤„ç†
- âœ… **å·¥å…·å‡½æ•°** - æ—¥æœŸå¤„ç†ã€æ•°æ®éªŒè¯ã€ç¼“å­˜ç®¡ç†

#### E2Eæµ‹è¯•è¦†ç›–
- âœ… **ç”¨æˆ·è®¤è¯æµç¨‹** - ç™»å½•ã€ç™»å‡ºã€ä¼šè¯ç®¡ç†
- âœ… **é£Ÿç‰©è®°å½•CRUD** - æ·»åŠ ã€æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤è®°å½•
- âœ… **é¡µé¢å¯¼èˆª** - ä»ªè¡¨æ¿ã€ä»Šæ—¥è®°å½•ã€å†å²è®°å½•é¡µé¢
- âœ… **å›¾ç‰‡ä¸Šä¼ ** - æ–‡ä»¶é€‰æ‹©ã€ä¸Šä¼ ç•Œé¢éªŒè¯
- âœ… **å“åº”å¼è®¾è®¡** - ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯é€‚é…
- âœ… **æ•°æ®æŒä¹…åŒ–** - é¡µé¢åˆ·æ–°åæ•°æ®ä¿æŒ
- âœ… **é”™è¯¯å¤„ç†** - ç½‘ç»œé”™è¯¯ã€è¡¨å•éªŒè¯é”™è¯¯

### æµ‹è¯•ç¯å¢ƒé…ç½®
- **æµ‹è¯•ç¯å¢ƒ**: https://food.tinycard.xyz
- **æµ‹è¯•è´¦å·**: includeleec@gmail.com / 123456
- **æµè§ˆå™¨**: Chromeæ¡Œé¢ç‰ˆ + Mobile Chrome
- **æ¡†æ¶**: Jest (å•å…ƒæµ‹è¯•) + Playwright (E2Eæµ‹è¯•)

### æµ‹è¯•ç»“æœ
- **æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡ç‡**: 100% âœ…
  - Homepage loads and redirects to auth
  - User can login successfully
  - Dashboard shows main features
- **å•å…ƒæµ‹è¯•**: 45+ æµ‹è¯•ç”¨ä¾‹è¦†ç›–ä¸»è¦ç»„ä»¶å’ŒåŠŸèƒ½
- **E2Eæµ‹è¯•**: 12+ æµ‹è¯•åœºæ™¯è¦†ç›–å®Œæ•´ç”¨æˆ·æµç¨‹

### è¿è¡Œæµ‹è¯•ç¤ºä¾‹
```bash
# è¿è¡Œæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•ï¼ˆå…¨éƒ¨é€šè¿‡ï¼‰
npm run test:e2e -- --project=chromium --grep="Homepage loads and redirects to auth|User can login successfully|Dashboard shows main features"

# è¿è¡Œæ‰€æœ‰æ–°çš„ä¸»è¦åŠŸèƒ½æµ‹è¯•
npm run test:e2e -- --project=chromium e2e/food-tracker-main.spec.ts

# è¿è¡Œå®‰å…¨ç›¸å…³æµ‹è¯•
npm test lib/__tests__/security-utils.test.ts
npm test __tests__/security-comprehensive.test.ts

# è¿è¡Œç‰¹å®šç»„ä»¶æµ‹è¯•
npm test components/food/__tests__/food-record-form.test.tsx
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Cloudflare Workers éƒ¨ç½²

1. **é…ç½® wrangler.toml**
```toml
name = "food-tracker-app"
main = ".open-next/worker.js"
account_id = "your_account_id"
compatibility_date = "2025-03-01"

[vars]
NEXT_PUBLIC_SUPABASE_URL = "your_supabase_url"
# ... å…¶ä»–ç¯å¢ƒå˜é‡
```

2. **æ‰§è¡Œéƒ¨ç½²**
```bash
npm run deploy
```

### è‡ªå®šä¹‰åŸŸåé…ç½®
1. åœ¨ Cloudflare Dashboard ä¸­æ·»åŠ åŸŸå
2. é…ç½® Workers Routes
3. è®¾ç½® SSL/TLS åŠ å¯†

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- [Next.js](https://nextjs.org/) - å¼ºå¤§çš„Reactæ¡†æ¶
- [Supabase](https://supabase.com/) - å¼€æºFirebaseæ›¿ä»£æ–¹æ¡ˆ
- [Cloudflare](https://cloudflare.com/) - è¾¹ç¼˜è®¡ç®—å’ŒCDNæœåŠ¡
- [Tailwind CSS](https://tailwindcss.com/) - å®ç”¨ä¼˜å…ˆCSSæ¡†æ¶

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub**: [@includeleec](https://github.com/includeleec)
- **é¡¹ç›®åœ°å€**: [https://github.com/includeleec/foodtracker](https://github.com/includeleec/foodtracker)
- **åœ¨çº¿æ¼”ç¤º**: [https://food.tinycard.xyz](https://food.tinycard.xyz)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼